!function(e){function t(n){if(r[n])return r[n].exports;var u=r[n]={i:n,l:!1,exports:{}};return e[n].call(u.exports,u,u.exports,t),u.l=!0,u.exports}var r={};return t.m=e,t.c=r,t.i=function(e){return e},t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=12)}([function(e,t,r){"use strict";function n(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function u(e,t){this.f=e,this.args=t}function i(e,t){if(--l<0)throw new u(e,t)}function o(e,t,r){function u(e,t,r){function n(e){if(e=parseFloat(e),Number.isNaN(e))throw new Error("Expected number but got "+e);return e}function u(e){if(0==n(e))throw new Error("Divide by zero");return e}switch(e){case"+":return n(t)+n(r);case"-":return n(t)-n(r);case"*":return n(t)*n(r);case"/":return n(t)/u(r);case"%":return n(t)%u(r);case"&&":return t!==!1&&r;case"||":return t!==!1?t:r;case"<":return n(t)<n(r);case">":return n(t)>n(r);case"<=":return n(t)<=n(r);case">=":return n(t)>=n(r);case"==":return t===r;case"!=":return t!==r}throw new Error("Can't apply operator "+e)}function a(e,t){function r(n){i(r,arguments);for(var u=t.vars,a=e.extend(),l=0;l<u.length;++l)a.def(u[l].value,l+1<arguments.length&&arguments[l+1],{immutable:!0,force:!0});o(t.body,a,n)}return r}switch(i(o,arguments),e.type){case"number":case"string":case"bool":return void r(e.value);case"var":return void r(t.get(e.value));case"define":if("var"!=e.left.type)throw new Error("Cannot assign to "+e.left.type);return void o(e.right,t,function n(u){i(n,arguments),r(t.def(e.left.value,u,{immutable:"immutable"==e.varient,force:!1}))});case"assign":if("var"!=e.left.type)throw new Error("Cannot assign to "+e.left.type);return void o(e.right,t,function n(u){i(n,arguments),r(t.set(e.left.value,u))});case"binary":return void o(e.left,t,function n(a){i(n,arguments),o(e.right,t,function t(n){i(t,arguments),r(u(e.operator,a,n))})});case"function":return void r(a(t,e));case"if":return void o(e.cond,t,function n(u){i(n,arguments),u!==!1?o(e.then,t,r):e.else?o(e.else,t,r):r(!1)});case"block":var l=e.global?t:t.extend();return void function t(n,u){i(t,arguments),u<e.prog.length?o(e.prog[u],l,function e(r){i(e,arguments),t(r,u+1)}):r(n)}(!1,0);case"call":return void o(e.func,t,function u(a){i(u,arguments),function r(u,l){i(r,arguments),l<e.args.length?o(e.args[l],t,function e(t){i(e,arguments),u[l+1]=t,r(u,l+1)}):a.apply(void 0,n(u))}([r],0)});default:throw new Error("Cannot evaluate "+JSON.stringify(e))}}function a(e,t){for(;;)try{return l=200,e.apply(void 0,n(t))}catch(r){if(!(r instanceof u))throw r;e=r.f,t=r.args}}Object.defineProperty(t,"__esModule",{value:!0}),t.GUARD=i,t.cpsEvaluate=o,t.Execute=a;var l=void 0},function(e,t,r){"use strict";function n(e){function t(){var t=e.charAt(a),r={value:t,line:l,col:f,pos:a};return a++,"\n"==t?(l++,f=0):f++,r}function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return e.charAt(a+t)}function n(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=e.charAt(a+t),n={value:r,line:l,col:f,pos:a},u=0;u<t;u++)"\n"==e.charAt(n.pos)?(n.line++,n.col=0):n.col++,n.pos++;return n}function u(){return""===r()}function i(e,t){if(o){var r=document.createElement("span");r.setAttribute("class","cm-error"),r.style.display="block",r.innerText=e+": "+t+" at line "+l+":"+f,o.widgets.push(o.addLineWidget(l-1,r,{noHScroll:!0}))}throw new Error(e+": "+t+" at line "+l+":"+f)}var o=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=0,l=1,f=0;return{next:t,peek:r,eof:u,err:i,peekData:n}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},function(e,t,r){"use strict";function n(e){function t(e){return{type:"call",func:e,args:n("(",")",",",v)}}function r(e){return e=e(),b("(")?t(e):e}function n(t,r,n,u){var i=[],o=!0;for(_(t);!e.eof()&&!b(r)&&(o?o=!1:_(n),!b(r));)i.push(u());return _(r),i}function u(){var e=n("{","}",";",v);return 0===e.length?p:1==e.length?e[0]:{type:"block",prog:e}}function i(){return{type:"bool",value:"true"==e.next().value}}function o(){k("if");var t=v();b("{")||k("then");var r=v(),n={type:"if",cond:t,then:r};return g("else")&&(e.next(),n.else=v()),n}function a(){var t=e.next(),r="";return"mod"==t.type&&(r="?",t=e.next()),"var"!=t.type&&e.err("Parse Error","Expecting variable name"),{value:t.value,mod:r}}function l(){var t=e.next(),r=void 0,u=void 0,i=void 0;return"fn"==t.value?("var"==e.peek().type&&(u=e.next()),r=n("(",")",",",a),k("->")):(r=[],u=null),i={type:"function",vars:r,body:v()},u&&(i={type:"define",varient:"immutable",left:u,right:i}),i}function f(){e.next();var t="immutable";g("mut")&&(t="mutable",k("mut"));var r=x();r?O(r.value):e.err("Parse Error","Expecting variable name after "+("immutable"==t?"let":"let mut"));var n={type:"number",value:0};return m("=")&&(E("="),n=v()),{type:"define",varient:t,left:r,right:n}}function c(){return r(function(){if(b("(")){e.next();var t=v();return _(")"),t}if(b("{"))return u();if(g("if"))return o();if(g("true")||g("false"))return i();if(g("fn")||g("fn->"))return l();if(g("let"))return f();var r=e.next();return"var"==r.type||"number"==r.type||"string"==r.type?r:void e.err("Parse Error","Unexpected token: "+JSON.stringify(r))})}function s(t,r){var n=m();if(n){var u=y[n.value];if(u>r){e.next();var i=void 0,o=["=","*=","+=","-=","/="];return i=o.indexOf(n.value)>=0?"assign":"binary",s({type:i,operator:n.value,left:t,right:s(c(),u)},r)}}return t}function v(){return r(function(){return s(c(),0)})}function d(){for(var t=[];!e.eof();)t.push(v()),e.eof()||_(";");return{type:"block",prog:t,global:!0}}var p={type:"bool",value:!1},y={"=":1,"*=":1,"/=":1,"+=":1,"-=":1,"||":2,"&&":3,"<":7,">":7,"<=":7,">=":7,"==":7,"!=":7,"+":10,"-":10,"*":20,"/":20,"%":20,"|>":30},h=function(t){return function(r){var n=e.peek();return n&&n.type==t&&(!r||n.value==r)&&n}},b=h("punc"),g=h("kw"),m=h("op"),x=h("var"),w=function(t){return function(r){h(t)(r)?e.next():e.err("Parse Error","Expecting "+t+': "'+r+'"')}},_=w("punc"),k=w("kw"),E=w("op"),O=w("var");return d()}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function u(e){function t(t){for(var r="";t(e.peek(),e.peek(1))&&!e.eof();)r+=e.next().value;return r}function r(){var r=e.next(),n=void 0;"/"==r.value?(e.next(),n="//"):n="#";var u=t(function(e){return"\n"!==e});return{type:"comment",varient:n,value:u,line:r.line,col:r.col}}function n(){var r=e.next();e.next();var n=t(function(e,t){return"*"!==e&&"/"!==t});return e.next(),e.next(),{type:"comment",varient:"multiline",value:n,line:r.line,col:r.col}}function u(t){for(var r=!1,n="";!e.eof();){var u=e.next(),i=u.value;if(r)n+="n"==i?"\n":i,r=!1;else if("\\"==i)r=!0;else{if(i==t)break;n+=i}}return n}function i(){var t=e.next(),r="'"==t.value?"'":'"',n=u(r);return{type:"string",varient:r,value:n,line:t.line,col:t.col}}function a(){var r=e.peekData(),n=!1,u=t(function(e){return"."==e?!n&&(n=!0,!0):o.default.is_digit(e)});return{type:"number",value:u,line:r.line,col:r.col}}function l(){var r=e.peekData(),n=t(o.default.is_id);return{type:o.default.is_keyword(n)?"kw":"var",value:n,line:r.line,col:r.col}}function f(){var t=e.next();return{type:"punc",value:t.value,line:t.line,col:t.col}}function c(){var r=e.peekData();return{type:"op",value:t(o.default.is_op),line:r.line,col:r.col}}function s(){var t=e.next();return{type:"mod",value:t.value,line:t.line,col:t.col}}function v(){if(t(o.default.is_whitespace),e.eof())return null;var u=e.peek(),d=e.peek(1);return"#"==u?(r(),v()):"/"==u&&"*"==d?(n(),v()):"/"==u&&"/"==d?(r(),v()):"'"==u||'"'==u?i():o.default.is_digit(u)?a():o.default.is_id_start(u)||"-"==u&&">"==d?l():o.default.is_punc(u)?f():o.default.is_op(u)?c():"?"==u?s():void e.err("Lexing Error",'Unexpected character "'+u+'"')}function d(){return h||(h=v())}function p(){var e=h;return h=null,e||v()}function y(){return null===d()}var h=null;return{next:p,peek:d,eof:y,err:e.err}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=u;var i=r(4),o=n(i)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={keywords:["if","then","else","fn","->","true","false","null","let","mut","fn->"],is_whitespace:function(e){return" \t\n".indexOf(e)>=0},is_digit:function(e){return/[0-9]/i.test(e)},is_id_start:function(e){return/[a-z_]/i.test(e)},is_id:function(e){return n.is_id_start(e)||"?!-<>=0123456789".indexOf(e)>=0},is_keyword:function(e){return n.keywords.indexOf(e)>=0},is_punc:function(e){return",;[]{}()".indexOf(e)>=0},is_op:function(e){return"+-*/%=&|<>!^".indexOf(e)>=0}};t.default=n},function(e,t,r){"use strict";function n(e){this.vars=Object.create(e?e.vars:{}),this.parent=e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n,n.prototype={extend:function(){return new n(this)},lookup:function(e){for(var t=this;t;){if(Object.prototype.hasOwnProperty.call(t.vars,e))return t;t=t.parent}return!1},get:function(e){if(e in this.vars)return this.vars[e].value;throw new Error("Undefined variable "+e)},set:function(e,t){var r=this.lookup(e);if(!(r||this).vars.hasOwnProperty(e))throw new Error("Undefined variable "+e);var n=(r||this).vars[e];if(n.immutable)throw new Error("Cannot write to read-only variable "+e);return n.value=t},def:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{immutable:!0,force:!0},n=r.immutable,u=void 0===n||n,i=r.force,o=void 0===i||i;if(this.vars.hasOwnProperty(e)&&!o)throw new Error("Variable "+JSON.stringify(e)+" is already defined");if(this.parent&&!o)throw new Error("Cannot define value when not in global scope");return this.vars[e]={value:t,immutable:u}}}},,,,,,,function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var u=r(1),i=n(u),o=r(3),a=n(o),l=r(2),f=n(l),c=r(5),s=n(c),v=r(0),d=n(v);t.default={input:i.default,token:a.default,parse:f.default,environment:s.default,evaluate:d.default}}]);